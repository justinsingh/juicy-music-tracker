<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico"/>
    <script type="text/javascript"
            src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="https://www.w3schools.com/lib/w3.js">
    </script>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Amiri:400,400i|Open+Sans"
          rel="stylesheet">
    <title>Juicy Music Tracker</title>
    <link href="styles.css" rel="stylesheet">
</head>
<body onload="w3.sortHTML('#album_list1','.album_entry','div:nth-child(4)');
w3.sortHTML('#album_list1','.album_entry','div:nth-child(4)')">
<div class="main_header">
    <h1>Fresh music releases arranged by Spotify streaming popularity.</h1>
</div>
<div id="album_list1" class="album_list">
    <script>
        var count = 1;
        $(function () {

            $.getJSON('data/new_albums.json', function (data) {
                $.each(data, function (key, value) {
                    var albumListDiv = document.getElementById("album_list1")

                    var albumListEntryDiv = document.createElement('div');
                    albumListEntryDiv.id = 'entry' + count;
                    albumListEntryDiv.className = 'album_entry';

                    var albumArtContainer = document.createElement('a');
                    albumArtContainer.href = value[0]["spotify_url"];
                    albumArtContainer.className = "nav-link";
                    albumArtContainer.target = "_blank";

                    var albumArtDiv = document.createElement('img');
                    albumArtDiv.src = value[0]["album_art_url"];
                    albumArtDiv.id = 'art' + count;
                    albumArtDiv.className = 'album_art';

                    albumArtContainer.appendChild(albumArtDiv);

                    var albumNameContainer = document.createElement('a');
                    albumNameContainer.href = value[0]["spotify_url"];
                    albumNameContainer.className = "nav-link";
                    albumNameContainer.target = "_blank";

                    var albumNameDiv = document.createElement('div');
                    albumNameDiv.id = 'name' + count;
                    albumNameDiv.className = 'album_name';
                    albumNameDiv.innerHTML = key;

                    albumNameContainer.appendChild(albumNameDiv);

                    var albumArtistDiv = document.createElement('div');
                    albumArtistDiv.id = 'artist' + count;
                    albumArtistDiv.className = 'album_artist';
                    albumArtistDiv.innerHTML = value[0]["artists"].join(' & ');

                    var albumPopularityDiv = document.createElement('div');
                    albumPopularityDiv.id = 'popularity' + count;
                    albumPopularityDiv.className = 'album_popularity';
                    albumPopularityDiv.innerHTML = 'Popularity: ' +
                        value[0]["popularity"];

                    albumListEntryDiv.appendChild(albumArtContainer);
                    albumListEntryDiv.appendChild(albumNameContainer);
                    albumListEntryDiv.appendChild(albumArtistDiv);
                    albumListEntryDiv.appendChild(albumPopularityDiv);
                    albumListDiv.appendChild(albumListEntryDiv);
                    count++;
                })
            })
        });
    </script>
</div>
</body>
</html>